require(["zepto","template","catch/bet","catch/roll","util","catch/task","api","plugins/tool"],function($,n,e,t,o,i,r,a){function c(){helpBtn.on(trigger,function(){var e=$(n("dollRuleTpl",{}));$("body").append(e),e.on(trigger,".jsClose",function(){e.remove()})}),$(".jsRecordBtn").on(trigger,function(n){panalContainer.toggleClass("active"),n.stopPropagation()}),$(".jsRecordItem").on(trigger,function(){if(1!=o.cookie.get("IsLogin"))return window.location.href=r.recordLoginHref,!1;window.location.href=r.recordHref}),$(".jsExchangeItem").on(trigger,function(){if(1!=o.cookie.get("IsLogin"))return window.location.href=r.exchangeLoginHref,!1;window.location.href=r.exchangeHref}),$(".jsPay").on(trigger,function(){1!=o.cookie.get("IsLogin")?window.location.href=r.loginHref:window.location.href=a.search.replace(r.rechargeHref,"beanCount",$("#jsdollbetbean").children(".current").attr("data-money"))}),$("body").on(trigger,function(){panalContainer.hasClass("active")&&panalContainer.removeClass("active")}),$(".jsEarnBtn").on(trigger,function(){var e=function(e){if(!e.state)return void o.ntips_center(e.state);var t=$(n("tpl_wxguide",e.data));$("body").append(t),t.on(trigger,function(){t.remove()})};r.getRank(e,{})})}dollStage=$(".doll-stage"),footer=$(".doll-ft"),panalContainer=$(".jsRecordList"),helpBtn=$(".jsHelpBtn"),j=$(".reddot"),betBtn=$(".jsBetBtn"),shareBtn=$(".jsShareBtn"),trigger="click",$(function(){o.getUserInfo({checkLogin:function(n){if(a.isWeixin()&&!n.state&&-5==n.code)return window.location.href=r.loginHref}}),c(),t.init(),e.init(),i.init()})});