define(["zepto","plugins/tool"],function($,t){function e(){var e={};switch(e.rrmHost="http://test.m.renrenma.cn",e.busId=5,r){case 0:e.rrmHost="http://test.m.renrenma.cn",e.host=window.location.protocol+"//test.m."+window.location.host.substring(7),e.busId=5,e.rrcs="http://attest.renrenma.cn/mallhome/";break;case 1:e.rrmHost="http://m.renrenma.com",e.host=window.location.protocol+"//m."+window.location.host.substring(2),e.busId=10110,e.rrcs="http://m.renrenma.com/shop/10110"}var n=t.search.get("activityId"),c=t.search.get("sourceId");return e.activityId=null!=n&&void 0!=n?n:i,e.sourceId=null!=c&&void 0!=c?c:o,e}var i=1,o=0,r=1,n=function(i,o,r,n,c,s){var o=arguments[1]?arguments[1]:function(){},r=arguments[2]?arguments[2]:{},n=arguments[3]?arguments[3]:"post",c=arguments[4]?arguments[4]:"json",s=arguments[5]?arguments[5]:function(){};r.activityId=e().activityId,r.sourceId=e().sourceId,r.presenterId=t.search.get("presenterId"),$.ajax({url:i,dataType:c,jsonp:"callback",type:n,data:r,headers:{Accept:"application/json"},success:function(t){"object"!=typeof t&&(t=JSON.parse(t)),o(t)},error:function(t){s(t)}})};return{getRank:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetBeanCost",t,i,"post","",o)},getGoodList:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetPrizeItems",t,i,"post","",o)},getWins:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetBroadcastInfo",t,i,"post","",o)},getUserInfo:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetUserInfo",t,i,"get","jsonp",o)},requestAward:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/ClawPrize",t,i,"get","jsonp",o)},checkTask:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/QueryCurAddup",t,i,"get","jsonp",o)},exchange:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/exchange",t,i,"get","jsonp",o)},getAward:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetExtraPrize",t,i,"get","jsonp",o)},askEgg:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/CanGetExtraBean",t,i,"get","jsonp",o)},getEggBean:function(t,i,o){n(e().host+"/PrizeActivity/PrizeActivity/GetExtraBean",t,i,"get","jsonp",o)},getHost:e,loginHref:e().host+"/WxUser/Login/Login?returnurl="+encodeURIComponent(window.location.href),recordHref:"record.html?index=1&sourceId="+e().sourceId+"&activityId="+e().activityId,recordLoginHref:e().host+"/WxUser/Login/Login?returnurl="+encodeURIComponent(window.location.href.replace("index","record")),rechargeHref:e().rrmHost+"/PrizeActivity/PrizeActivity/recharge?activityId="+e().activityId+"&sourceId="+e().sourceId+"&returnurl="+encodeURIComponent(window.location.href),exchangeLoginHref:e().host+"/WxUser/Login/Login?returnurl="+encodeURIComponent(window.location.href.replace("index","exchange")),exchangeHref:"exchange.html?sourceId="+e().sourceId+"&activityId="+e().activityId,request:n,environment:r}});