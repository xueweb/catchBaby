define(["zepto"],function($){var t=function(t,i){var e={onchange:function(){},trigger:"click",defaultIndex:0};if(this._container=$(t),this._tabs=this._container.children().children(".tab-item"),this._tabs.each(function(t,i){$(i).data("tab-index",t)}),this._items=this._container.children().children(".tab-content"),this._setting=$.extend({},e,i),this._currentIndex=this._setting.defaultIndex,this._container.data("w-"+this._constructor+"initialized"))return this.bind({onchange:this._setting.onchange}),this;this._init()};return t.prototype={_className:"tabView",_constructor:"TabView",_check:function(){"undefined"!=typeof log&&(this._container.selector=="."+this._className?void 0!==log.useDefaultSelector&&log.useDefaultSelector(this._className):0==this._container.size()?void 0!==log.noNode&&log.noNode(this._constructor):this._container.size()>1&&(this._container=this._container.eq(1),void 0!==log.noNode&&log.notSingleNode(this._constructor)))},_init:function(t){this._check();var i=this;this._tabs.each(function(t,i){$(i).data("tab-index",t)}),this._items.each(function(t,e){e=$(e),t!=i._currentIndex&&e.addClass("hidden")}),i.bind(i._setting),console.log(this._container.children()[0]),$(this._container.children()[0]).on(i._setting.trigger,".tab-item",function(t){var e=$(this).data("tab-index");console.log(e),i.switchTo(e)}),this._tabs.removeClass("active"),this._tabs.eq(this._currentIndex).addClass("active"),this._container.data("w-"+this._constructor+"initialized",!0)},bind:function(t){var i=this;return t.onchange&&this._container.on("switch.widget",function(e){t.onchange.call(i,e.current,e.last),e.stopPropagation()}),this},off:function(){this._container.off("switch.widget")},switchTo:function(t){var i=+this._currentIndex;if(console.log(t),console.log(i),t=+t,i!=t){this._switchTab(i,t);var e=this._items.eq(i);this._items.eq(t).removeClass("hidden"),e.addClass("hidden");var n=$.Event("switch");return n.current=t,n.last=i,this._currentIndex=t,this._container.trigger(n),this}},_switchTab:function(t,i){var e=this._tabs.eq(t),n=this._tabs.eq(i);e.removeClass("active"),n.addClass("active")},updateParam:function(){var t=this;this._tabs=this._container.children().children(".tab-item"),this._items=this._container.children().children(".tab-content"),this._currentIndex=this._tabs.length-1,this._tabs.each(function(t,i){$(i).data("tab-index",t),$(i).children(".btn-refresh, .btn-delete").addClass("hidden")}),this._items.removeClass("hidden"),this._items.each(function(i,e){e=$(e),i!=t._currentIndex&&e.addClass("hidden")}),this._tabs.removeClass("active");var i=this._tabs.eq(this._currentIndex);i.addClass("active"),i.children(".btn-refresh, .btn-delete").removeClass("hidden")}},t});